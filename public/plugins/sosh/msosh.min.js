!function(e){"use strict";var t,i=e.Base64,o="2.1.9";if("undefined"!=typeof module&&module.exports)try{t=require("buffer").Buffer}catch(n){}var s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=function(e){for(var t={},i=0,o=e.length;o>i;i++)t[e.charAt(i)]=i;return t}(s),a=String.fromCharCode,c=function(e){if(e.length<2){var t=e.charCodeAt(0);return 128>t?e:2048>t?a(192|t>>>6)+a(128|63&t):a(224|t>>>12&15)+a(128|t>>>6&63)+a(128|63&t)}var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return a(240|t>>>18&7)+a(128|t>>>12&63)+a(128|t>>>6&63)+a(128|63&t)},h=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,m=function(e){return e.replace(h,c)},p=function(e){var t=[0,2,1][e.length%3],i=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0),o=[s.charAt(i>>>18),s.charAt(i>>>12&63),t>=2?"=":s.charAt(i>>>6&63),t>=1?"=":s.charAt(63&i)];return o.join("")},l=e.btoa?function(t){return e.btoa(t)}:function(e){return e.replace(/[\s\S]{1,3}/g,p)},u=t?function(e){return(e.constructor===t.constructor?e:new t(e)).toString("base64")}:function(e){return l(m(e))},d=function(e,t){return t?u(String(e)).replace(/[+\/]/g,function(e){return"+"==e?"-":"_"}).replace(/=/g,""):u(String(e))},f=function(e){return d(e,!0)},b=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),g=function(e){switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),i=t-65536;return a((i>>>10)+55296)+a((1023&i)+56320);case 3:return a((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return a((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},w=function(e){return e.replace(b,g)},x=function(e){var t=e.length,i=t%4,o=(t>0?r[e.charAt(0)]<<18:0)|(t>1?r[e.charAt(1)]<<12:0)|(t>2?r[e.charAt(2)]<<6:0)|(t>3?r[e.charAt(3)]:0),n=[a(o>>>16),a(o>>>8&255),a(255&o)];return n.length-=[0,0,2,1][i],n.join("")},y=e.atob?function(t){return e.atob(t)}:function(e){return e.replace(/[\s\S]{1,4}/g,x)},v=t?function(e){return(e.constructor===t.constructor?e:new t(e,"base64")).toString()}:function(e){return w(y(e))},k=function(e){return v(String(e).replace(/[-_]/g,function(e){return"-"==e?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))},q=function(){var t=e.Base64;return e.Base64=i,t};if(e.Base64={VERSION:o,atob:y,btoa:l,fromBase64:k,toBase64:d,utob:m,encode:d,encodeURI:f,btou:w,decode:k,noConflict:q},"function"==typeof Object.defineProperty){var A=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}};e.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",A(function(){return k(this)})),Object.defineProperty(String.prototype,"toBase64",A(function(e){return d(this,e)})),Object.defineProperty(String.prototype,"toBase64URI",A(function(){return d(this,!0)}))}}e.Meteor&&(Base64=e.Base64)}(this),!function(){var e='@font-face{font-family:soshfont;src:url(./iconfont/soshfont.eot);src:url(./iconfont/soshfont.eot?#iefix) format("eot"),url(./iconfont/soshfont.woff2) format("woff2"),url(./iconfont/soshfont.woff) format("woff"),url(./iconfont/soshfont.ttf) format("truetype"),url(./iconfont/soshfont.svg#soshfont) format("svg");font-weight:400;font-style:normal}.msosh-item-icon,.sosh-item-icon{font-family:soshfont;font-style:normal;font-weight:400;font-variant:normal;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.msosh{*zoom:1;text-align:center}.msosh:after,.msosh:before{content:" ";display:table}.msosh:after{clear:both}.msosh-item{float:left;line-height:0;margin:5px;text-decoration:none;cursor:pointer;-webkit-tap-highlight-color:transparent}.msosh-item-icon{color:#fff;font-size:20px;display:inline-block;text-decoration:none;width:36px;height:36px;line-height:36px;border-radius:50%;text-align:center}.msosh-item-text{display:none}.msosh-item.weixin .msosh-item-icon{background:#49b233}.msosh-item.weixin:hover .msosh-item-icon{background:#398a28}.msosh-item.yixin .msosh-item-icon{background:#23cfaf}.msosh-item.yixin:hover .msosh-item-icon{background:#1ca38a}.msosh-item.weibo .msosh-item-icon{background:#f04e59}.msosh-item.weibo:hover .msosh-item-icon{background:#ec1f2d}.msosh-item.qzone .msosh-item-icon{background:#fdbe3d}.msosh-item.qzone:hover .msosh-item-icon{background:#fcad0b}.msosh-item.renren .msosh-item-icon{background:#1f7fc9}.msosh-item.renren:hover .msosh-item-icon{background:#18639d}.msosh-item.tieba .msosh-item-icon{background:#5b95f0}.msosh-item.tieba:hover .msosh-item-icon{background:#2c77ec}.msosh-item.douban .msosh-item-icon{background:#228a31}.msosh-item.douban:hover .msosh-item-icon{background:#186122}.msosh-item.tqq .msosh-item-icon{background:#97cbe1}.msosh-item.tqq:hover .msosh-item-icon{background:#6fb7d6}.msosh-item.qq .msosh-item-icon{background:#4081e1}.msosh-item.qq:hover .msosh-item-icon{background:#2066ce}.msosh-item.weixintimeline .msosh-item-icon{background:#1cb526}.msosh-item.weixintimeline:hover .msosh-item-icon{background:#15891d}.msosh-group{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;padding:15px 20px}.msosh-group .msosh-item{display:block;float:none;margin:0}.msosh-pop{display:none;position:fixed;z-index:9999;top:0;bottom:0;left:0;right:0;height:100%;width:100%;background:rgba(0,0,0,.65);opacity:0}.msosh-pop-show{opacity:1;-webkit-transition:opacity .8s ease-in;transition:opacity .8s ease-in}.msosh-pop-show .group1{-webkit-animation:a 1.2s 1 ease;animation:a 1.2s 1 ease}.msosh-pop-show .group2{-webkit-animation:a 1.8s 1 ease;animation:a 1.8s 1 ease}.msosh-pop-show .group3{-webkit-animation:a 2.4s 1 ease;animation:a 2.4s 1 ease}.msosh-pop-hide{opacity:0;-webkit-transition:opacity .8s ease-in;transition:opacity .8s ease-in}.msosh-pop-hide .group1{-webkit-animation:b .7s 1 cubic-bezier(.68,-.55,.265,1.55) 0ms;animation:b .7s 1 cubic-bezier(.68,-.55,.265,1.55) 0ms}.msosh-pop-hide .group2{-webkit-animation:b .7s 1 cubic-bezier(.68,-.55,.265,1.55) .3s;animation:b .7s 1 cubic-bezier(.68,-.55,.265,1.55) .3s}.msosh-pop-hide .group3{-webkit-animation:b .7s 1 cubic-bezier(.68,-.55,.265,1.55) .6s;animation:b .7s 1 cubic-bezier(.68,-.55,.265,1.55) .6s}.msosh-pop-sites{position:absolute;top:50%;left:0;width:100%;-webkit-transform:translateY(-50%);transform:translateY(-50%)}.msosh-pop .msosh-item-icon{width:60px;height:60px;line-height:60px;font-size:28px;text-align:center}.msosh-wxsharetip{position:fixed;top:5px;right:5px;height:60px;width:189px;background-image:url(./img/msoshwxtip.png);background-size:contain;background-repeat:no-repeat;opacity:0;visibility:hidden;-webkit-transition:all .6s ease-out;transition:all .6s ease-out;z-index:-1}.msosh-wxsharetip.wxsharetip-show{z-index:9999;opacity:1;visibility:visible}@-webkit-keyframes a{0%{-webkit-transform:translate3d(0,1136px,0);transform:translate3d(0,1136px,0)}50%,60%,to{-webkit-transform:translateZ(0);transform:translateZ(0)}}@keyframes a{0%{-webkit-transform:translate3d(0,1136px,0);transform:translate3d(0,1136px,0)}50%,60%,to{-webkit-transform:translateZ(0);transform:translateZ(0)}}@-webkit-keyframes b{0%{opacity:1;-webkit-transform:translateZ(0);transform:translateZ(0)}to{opacity:0;-webkit-transform:translate3d(0,500%,0);transform:translate3d(0,500%,0)}}@keyframes b{0%{opacity:1;-webkit-transform:translateZ(0);transform:translateZ(0)}to{opacity:0;-webkit-transform:translate3d(0,500%,0);transform:translate3d(0,500%,0)}}',t=document.createElement("style");t.type="text/css",t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),(document.head||document.getElementsByTagName("head")[0]).appendChild(t)}(),function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof module&&module.exports?module.exports=t():e.Msosh=t()}(this,function(){function e(){var e=arguments;this.opts={},"string"===o(e[0])?(this.elems=d.querySelectorAll(e[0]),this.length=this.elems.length,this.opts=e[1],this.init(this.opts)):"object"===o(e[0])&&(this.opts=e[0])}function t(){for(var e={},t=0;t<arguments.length;t++){var i=arguments[t];for(var o in i)l.call(i,o)&&(e[o]=i[o])}return e}function o(e){return null===e?"null":void 0===typeof e?"undefined":u.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function n(e,t){var i=[];for(var o in t)i.push(o+"="+t[o]);return e+(-1!==e.indexOf("?")?"&":"?")+i.join("&")}function s(e){for(var t=location.search.substring(1),i=t.split("&"),o=i.length,n=0;o>n;n++){var s=i[n].split("=");if(decodeURIComponent(s[0])==e)return decodeURIComponent(s[1])}}function r(e,t,i,o){e.addEventListener(i,function(e){for(var i=e.target,n=e.currentTarget;i&&i!==n;){if(a(i,t))return void o.call(i,e);i=i.parentNode}},!1)}function a(e,t){var i=Element.prototype,o=i.matches||i.webkitMatchesSelector||i.mozMatchesSelector||i.msMatchesSelector||function(e){return-1!==[].indexOf.call(d.querySelectorAll(e),this)};return o.call(e,t)}function c(e,t){var i=d.createElement("script");i.src=e,i.onload=onreadystatechange=function(){this.readyState&&"load"!==this.readyState&&"complete"!==this.readyState||(t&&t(),i.onload=onreadystatechange,i.parentNode.removeChild(i))},f.appendChild(i)}function h(e){return e=e.toLowerCase(),-1!==w.indexOf(e)}function m(e){var t=e.split(".");return parseFloat(t[0]+"."+t[1])}function p(e){if(_>8)window.location.href=e;else{var t=d.createElement("iframe");t.style.display="none",t.src=e,f.appendChild(t),setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},5e3)}}var l=Object.prototype.hasOwnProperty,u=Object.prototype.toString,d=document,f=d.body,b=d.getElementsByName("description")[0],g=d.getElementsByTagName("img")[0],w=navigator.userAgent.toLowerCase(),x=h("iPhone")||h("iPad")||h("iPod"),y=h("Android"),v=h("UCBrowser"),q=h("MQQBrowser"),A=h("MicroMessenger"),C=q?m(w.split("mqqbrowser/")[1]):0,S=v?m(w.split("ucbrowser/")[1]):0,_=x?parseInt(w.match(/\s*os\s*\d/gi)[0].split(" ")[2],10):0,z=!1;(x&&S>=10.2||y&&S>=9.7||C>=5.4)&&(z=!0),A&&f.insertAdjacentHTML("beforeend",'<div class="msosh-wxsharetip"></div>');var B='<a class="msosh-item {{site}}" data-site="{{site}}" href="javascript:;"><em class="msosh-item-icon">{{icon}}</em><span class="msosh-item-text">{{name}}</span></a>',j={weixin:{name:"微信好友",icon:"&#xeA07;"},weixintimeline:{name:"朋友圈",icon:"&#xeA10;"},qq:{name:"QQ好友",icon:"&#xeA09;",scheme:"mqqapi://share/to_fri?src_type=web&version=1&file_type=news"},qzone:{name:"QQ空间",icon:"&#xeA02;",api:"http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url={{url}}&title={{title}}&pics={{pic}}&desc={{digest}}",scheme:x?"mqqapi://share/to_fri?file_type=news&src_type=web&version=1&generalpastboard=1&shareType=1&cflag=1&objectlocation=pasteboard&callback_type=scheme&callback_name=QQ41AF4B2A":"mqqapi://share/to_qzone?src_type=app&version=1&file_type=news&req_type=1"},yixin:{name:"易信",icon:"&#xeA08;",api:"http://open.yixin.im/share?url={{url}}&title={{title}}&pic={{pic}}&desc={{digest}}"},weibo:{name:"微博",icon:"&#xeA06;",api:"http://service.weibo.com/share/share.php?url={{url}}&title={{title}}&pic={{pic}}"},tqq:{name:"腾讯微博",icon:"&#xeA05;",api:"http://share.v.t.qq.com/index.php?c=share&a=index&url={{url}}&title={{title}}&pic={{pic}}"},renren:{name:"人人网",icon:"&#xeA03;",api:"http://widget.renren.com/dialog/share?resourceUrl={{url}}&title={{title}}&pic={{pic}}&description={{digest}}"},douban:{name:"豆瓣",icon:"&#xeA01;",api:"http://douban.com/recommend/?url={{url}}&title={{title}}&image={{pic}}"},tieba:{name:"百度贴吧",icon:"&#xeA04;",api:"http://tieba.baidu.com/f/commit/share/openShareApi?url={{url}}&title={{title}}&desc={{digest}}"}},T={weibo:["kSinaWeibo","SinaWeibo",11],weixin:["kWeixin","WechatFriends",1],weixintimeline:["kWeixinFriend","WechatTimeline",8],qq:["kQQ","QQ",4],qzone:["kQZone","Qzone",3]},E={title:d.title,url:location.href,digest:b&&b.content||"",pic:g&&g.src||"",from:location.host,sites:["weixin","weixintimeline","yixin","weibo","qq","qzone"]};return e.prototype={constructor:this,init:function(e){var o=s("__msoshbridge");if(o&&"function"==typeof history.replaceState){var n=location.href.replace(new RegExp("[&?]__msoshbridge="+o,"gi"),"");history.replaceState(null,d.title,n),this.shareTo(o,t(E,e))}if(this.length)for(i=0;i<this.length;i++){var r=this.elems[i],a=t(r.dataset);a.sites&&(a.sites=a.sites.split(","));var c=t(E,e,a),h=this.getSitesHtml(c.sites);r.insertAdjacentHTML("beforeend",h),r.classList.add("msosh"),this._handlerClick(r,c)}},getSitesHtml:function(e,t){for(var i=0,n="",s=e.length,t="number"===o(t)&&0!==t?t:0;s>i;i++)t&&i%t===0&&(n+='<div class="msosh-group group'+(i/t+1)+'">'),n+=this.parseTemplate(e[i]),!t||i%t!==t-1&&i!==s-1||(n+="</div>");return n},parseTemplate:function(e){return j[e]?B.replace(/\{\{site\}\}/g,e).replace(/\{\{icon\}\}/g,j[e].icon).replace(/\{\{name\}\}/g,j[e].name):(console.warn("site ["+e+"] not exist."),"")},shareTo:function(t,i){var o,s,r=this,a=j[t].api;if(z){if(v&&(T[t]&&(o=x?T[t][0]:T[t][1]),void 0!==o))return s=[i.title,i.digest,i.url,o,"","@"+i.from,""],window.ucweb&&ucweb.startRequest&&ucweb.startRequest("shell.page_share",s),void(window.ucbrowser&&ucbrowser.web_share&&ucbrowser.web_share.apply(null,s));if(q&&(T[t]&&(o=T[t][2]),void 0!==o))return void(window.browser?(s={url:i.url,title:i.title,description:i.digest,img_url:i.pic,img_title:i.title,to_app:o,cus_txt:""},browser.app&&browser.app.share(s)):c("//jsapi.qq.com/get?api=app.share",function(){r.shareTo(t,i)}))}if("qzone"===t||"qq"==t){var h=n(j[t].scheme,{share_id:"1101685683",url:Base64.encode(i.url),title:Base64.encode(i.title),description:Base64.encode(i.digest),previewimageUrl:Base64.encode(i.pic),image_url:Base64.encode(i.pic)});return void p(h)}if(-1!==t.indexOf("weixin")){var m=n(location.href,{__msoshbridge:t});p("mttbrowser://url="+m)}if(A&&-1!==t.indexOf("weixin"))return void e.wxShareTip();if(a){for(k in i)a=a.replace(new RegExp("{{"+k+"}}","g"),encodeURIComponent(i[k]));window.open(a,"_blank")}},popIn:function(e){if(!this.popElem){var i=t(E,this.opts,e),o='<div class="msosh-pop"><div class="msosh-pop-sites">'+this.getSitesHtml(i.sites,3)+"</div></div>";f.insertAdjacentHTML("beforeend",o),this.popElem=d.querySelector(".msosh-pop"),this.popClass=this.popElem.classList,this._handlerClick(this.popElem,i),this.popElem.onclick=function(){this.popOut()}.bind(this)}this.popClass.remove("msosh-pop-hide"),this.popElem.style.display="block",setTimeout(function(){this.popClass.add("msosh-pop-show")}.bind(this),0)},popOut:function(){this.popElem&&(this.popClass.remove("msosh-pop-show"),this.popClass.add("msosh-pop-hide"),setTimeout(function(){this.popElem.style.display="none"}.bind(this),800))},_handlerClick:function(e,t){var i=this;r(e,".msosh-item","click",function(){i.shareTo(this.dataset.site,t)})}},e.wxShareTip=function(e){if("number"!==o(e)&&(e=2e3),A){var t=d.querySelector(".msosh-wxsharetip");t.classList.add("wxsharetip-show"),setTimeout(function(){t.classList.remove("wxsharetip-show")},e)}},f.addEventListener("touchstart",function(){},!1),e});